{% extends "base/base.html" %}

{% block content %}
<div class="row">
        <div class="column is-4 is-offset-4" style="height: 100%">
          <p>The Water Irrigation Scheduler for Efficiency (WISE) is a user-friendly tool developed to optimize irrigation scheduling, helping you maximize crop yields while minimizing excess water usage. Designed for farmers, consultants, and researchers, WISE accommodates various soil types, climates, and irrigation practices across much of the Western United States. This tool was originally developed by – (the Department of Civil and Environmental Engineering at Colorado State University, <a href="http://wise.colostate.edu/" target="_blank">http://wise.colostate.edu/</a> )​</p>
          <p><strong>Key Features:​</strong></p>
          <p>Customizable Crop Fields: Easily define your crop boundaries and create tailored fields specific to your needs.​</p>
          <p>Integrated Data Sources: Enhance your irrigation planning by incorporating:​</p>
          <ul>
            <li>Weather Station Data: Access local, near real-time weather information.​</li>
            <li>Soil Data: Retrieve soil properties from databases like the NRCS.</li>
            <li>Field Attributes: Input specific details about your crops and irrigation systems.</li>
          </ul>
          <p><strong>Results and Reporting:​</strong></p>
          <p>After setting up your field, WISE generates a customized irrigation schedule that includes:</p>
          <ul>
            <li>Summary of Crop Irrigation Needs: Understand the specific water requirements for your crops.​</li>
            <li>Detailed Scheduling: View tables and graphs illustrating optimal irrigation times and amounts.​</li>
          </ul>
          <p>You can export these results as Excel files or images or print them directly from the interface for seamless integration into your records. With WISE, efficient irrigation scheduling is at your fingertips, enabling you to make informed decisions that benefit your crops and resource management. ​</p>
        </div>
    <div class="column is-4 is-offset-4 bluebox" style="height: 100%">
        <h3 class="title">Upload Excel File</h3>
        <br>
        <div class="box">
            <form method="POST" enctype="multipart/form-data" class="form-inline" onsubmit="return validateFile()">
                <div class="form-group">
                    <input class="input is-large"  accept=".xlsx" id="fileInput" onchange="changeButton()" type="file" name="file" placeholder="Upload File Here" autofocus="">
                </div>
                    
                    </div><div class="form-group">                         
                        </div>
                
                        <button id="sub" type='submit' class="btn btn-danger" disabled>Upload</button>
                        <p></p>
                        <p>Sample data file: <a href="/static/data.xlsx" target="_blank"> data.xls</a></p>
                        </form>
                        
                        
                        </div>
    </div>
</div>
<script>
    function changeButton(){
        const fileInput = document.getElementById('fileInput');
        const theButton = document.getElementById("sub");
        theButton.disabled = !fileInput.value
    }

    function validateFile() {
        const fileInput = document.getElementById('fileInput');
        const filePath = fileInput.value;
        const allowedExtensions = /(\.xlsx)$/i;

        if (!allowedExtensions.exec(filePath)) {
            alert('Please upload a file with .xlsx extension.');
            fileInput.value = '';
            theButton.disabled=true;
            return false;
        }

        return true;
    }
    
</script>

{% endblock %}